# FFmpeg多功能批处理工具

一个简单的Java桌面应用程序，用于批量对文件夹中的媒体文件执行FFmpeg命令，提供多种处理功能。

## 功能特点

- 提供三种功能模式：转小（压缩）、去小字、去未完待续
- 可在不同功能模式间轻松切换
- 选择文件夹路径（通过浏览按钮或直接输入）
- 自定义FFmpeg命令参数
- 去除视频水印/小字/未完待续标记功能
- 支持只处理视频结尾指定时长段落
- 显示处理进度条和状态
- 实时显示FFmpeg执行日志
- 自动检测常见媒体文件类型

## 使用方法

1. 启动应用程序
   - 双击`launch.vbs`可以直接启动应用程序（最简方式，推荐）
   - 双击`start.vbs`可以自动检测JAR文件是否存在，如不存在会询问是否构建
   - 双击`run.bat`可以在控制台窗口中启动应用程序

2. 选择功能模式：点击顶部的功能按钮进行切换
   - **转小**：视频压缩功能
   - **去小字**：去除视频中的小字/字幕水印
   - **去未完待续**：去除视频末尾的"未完待续"标记

3. 根据选择的功能模式填写相应参数：

   **转小模式**：
   - 在"文件夹路径"字段中输入要处理的文件夹路径，或点击"浏览..."按钮选择
   - 在"压缩参数"字段中输入FFmpeg压缩参数（默认为`-c:v libx264 -b:v 8000k -crf 23 -y`）
   - 点击"开始转小"按钮执行处理
   - 处理后的文件会保存为原文件名+"_c"的形式

   **去小字模式**：
   - 在"文件夹路径"字段中输入要处理的文件夹路径，或点击"浏览..."按钮选择
   - 在"去小字参数"字段中输入小字区域的坐标和尺寸，格式为`x,y,w,h`（例如：`98,1169,879,155`）
   - 点击"开始去小字"按钮执行处理
   - 处理后的文件会保存为原文件名+"_s"的形式

   **去未完待续模式**：
   - 在"文件夹路径"字段中输入要处理的文件夹路径，或点击"浏览..."按钮选择
   - 在"去未完待续参数"字段中输入水印区域的坐标和尺寸，格式为`x,y,w,h`
   - 在"结尾处理时长(秒)"字段中输入要处理的秒数（例如：`2.2`表示处理视频的最后2.2秒）
   - 点击"开始去未完待续"按钮执行处理
   - 处理后的文件会保存为原文件名+"_w"的形式

4. 处理过程中会在日志区域显示FFmpeg的输出信息

## 系统要求

- Java 11或更高版本
- 已安装FFmpeg并添加到系统PATH

## 构建和运行

使用Maven构建项目：

```
mvn clean package
```

运行生成的JAR文件：

```
java -jar target/ffmpeg-batch-processor-1.0-SNAPSHOT.jar
```

或使用无窗口启动（仅Windows）：

```
javaw -jar target/ffmpeg-batch-processor-1.0-SNAPSHOT.jar
```

## 问题排查

如果VBS脚本无法运行，可能是由于编码或权限问题，请尝试：

1. 使用`launch.vbs`（最简单的脚本）
2. 确保已经通过Maven构建了项目（`mvn clean package`）
3. 直接使用命令行运行：`javaw -jar target\ffmpeg-batch-processor-1.0-SNAPSHOT.jar`

## 注意事项

- 处理过程中会在原文件所在目录创建新文件
- 确保有足够的磁盘空间存储处理后的文件
- 处理大文件时可能需要等待较长时间
- 去水印效果取决于水印的复杂度和背景，参数调整可能需要多次尝试
- 使用结尾处理时长功能需要确保ffprobe可用（与ffmpeg一起安装） 